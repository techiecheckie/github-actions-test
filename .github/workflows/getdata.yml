name: Clone Repo Workflow

on:
  push:
  schedule:
    - cron: '47 17 * * *'
  workflow_dispatch:
    
jobs:
  job-public-repo-window:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Clone repo
        uses: GuillaumeFalourd/clone-github-repo-action@v2
        with:
         owner: 'thomasloven'
         repository: 'hass-config'
      - name: Access repo content
        run: |
          mkdir $GITHUB_WORKSPACE/hass-config_data/data
          cp -v hass-config/appdaemon/apps/helpers/*  $GITHUB_WORKSPACE/hass-config_data/data
          git checkout -b $(date "+%Y-%m-%d")
          git add $GITHUB_WORKSPACE/hass-config_data/data/
          git commit -m "Updating Hass Config data."
          git push origin $(date "+%Y-%m-%d")
